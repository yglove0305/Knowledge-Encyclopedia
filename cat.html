<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>고양이 지식백과 — 궁금해? 함께 파고들어보자</title>
  <meta name="description" content="고양이에 대한 모든 것: 해부·행동·품종·건강·영양·돌봄·역사·문화·유전. 검색, 필터, 다크모드, 퀴즈, 북마크 등 풍부한 기능 제공." />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #ffffff;
      --bg-elev: #fafafa;
      --text: #141414;
      --muted: #6b7280;
      --primary: #6d28d9;
      --primary-acc: #8b5cf6;
      --accent: #10b981;
      --danger: #ef4444;
      --warn: #f59e0b;
      --card: #ffffff;
      --border: #e5e7eb;
      --shadow: 0 8px 24px rgba(0,0,0,.08);
      --radius: 14px;
      --maxw: 1200px;
      --font-size: 16px;
      --line: 1.65;
      --code: #0f172a;
      --chip-bg: #f3f4f6;
      --link: #2563eb;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0b0e14;
        --bg-elev:#101521;
        --text:#e5e7eb;
        --muted:#9ca3af;
        --primary:#a78bfa;
        --primary-acc:#c4b5fd;
        --accent:#34d399;
        --danger:#f87171;
        --warn:#fbbf24;
        --card:#0f1422;
        --border:#1f2937;
        --shadow: 0 10px 30px rgba(0,0,0,.5);
        --chip-bg:#1f2937;
        --link:#60a5fa;
        --code:#e2e8f0;
      }
    }
    [data-theme="light"]{
      --bg: #ffffff; --bg-elev:#fafafa; --text:#141414; --muted:#6b7280; --primary:#6d28d9; --primary-acc:#8b5cf6; --accent:#10b981; --danger:#ef4444; --warn:#f59e0b; --card:#ffffff; --border:#e5e7eb; --shadow: 0 8px 24px rgba(0,0,0,.08); --chip-bg:#f3f4f6; --link:#2563eb; --code:#0f172a;
    }
    [data-theme="dark"]{
      --bg:#0b0e14; --bg-elev:#101521; --text:#e5e7eb; --muted:#9ca3af; --primary:#a78bfa; --primary-acc:#c4b5fd; --accent:#34d399; --danger:#f87171; --warn:#fbbf24; --card:#0f1422; --border:#1f2937; --shadow: 0 10px 30px rgba(0,0,0,.5); --chip-bg:#1f2937; --link:#60a5fa; --code:#e2e8f0;
    }
    html{scroll-behavior:smooth;}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, "Apple SD Gothic Neo", "Noto Sans KR", "Segoe UI", Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg); color: var(--text); font-size: var(--font-size); line-height: var(--line);
    }
    .container{max-width: var(--maxw); margin: 0 auto; padding: 24px;}
    a{color: var(--link); text-decoration: none;}
    a:hover{text-decoration: underline;}
    .skip{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;}
    .skip:focus{position:static;width:auto;height:auto;padding:10px;background:var(--accent);color:#000;}

    header.hero{
      position: relative; padding: 56px 24px; background: radial-gradient(1200px 500px at 10% 10%, var(--primary-acc)20%, transparent 60%) no-repeat, linear-gradient(180deg, var(--bg-elev), var(--bg));
      overflow:hidden;
    }
    .hero .title{
      font-weight: 800; font-size: clamp(28px, 5vw, 52px); letter-spacing:-0.02em; margin: 0 0 6px 0;
    }
    .hero .subtitle{color: var(--muted); margin: 0 0 24px 0; font-size: clamp(14px, 2.4vw, 20px);}
    .bar{
      display: grid; grid-template-columns: 1fr auto auto auto; gap: 12px; align-items:center;
      background: var(--card); border:1px solid var(--border); padding: 10px; border-radius: var(--radius); box-shadow: var(--shadow);
    }
    .search{display:flex; align-items:center; gap:10px; background: var(--bg-elev); border:1px solid var(--border); border-radius: 10px; padding: 8px 12px;}
    .search input{all:unset; width: 100%;}
    .btn{display:inline-flex; align-items:center; gap:8px; padding: 8px 12px; border-radius: 10px; border:1px solid var(--border); background: var(--bg-elev); color:var(--text); cursor:pointer; transition: .2s transform;}
    .btn:hover{transform: translateY(-1px);}
    .btn.primary{background: var(--primary); color:#fff; border-color: transparent;}
    .chips{display:flex; gap:8px; flex-wrap: wrap;}
    .chip{background: var(--chip-bg); color: var(--text); padding: 4px 10px; border-radius:999px; border:1px solid var(--border); font-size:.9em; cursor:pointer; user-select:none;}
    .chip.active{background: var(--primary); color:#fff; border-color: transparent;}

    nav.toc{
      position: sticky; top: 8px; align-self: start; background: var(--card); border:1px solid var(--border); border-radius: var(--radius);
      padding: 16px; max-height: 75vh; overflow:auto; box-shadow: var(--shadow);
    }
    nav.toc h3{margin:.2rem 0 0.6rem 0; font-size: 1rem;}
    nav.toc a{display:block; padding: 6px 8px; border-radius: 8px; color: var(--muted);}
    nav.toc a.active, nav.toc a:hover{color: var(--text); background: var(--bg-elev);}

    main{display:grid; grid-template-columns: 260px 1fr; gap: 24px;}
    @media (max-width: 980px){main{grid-template-columns: 1fr;}}
    section{
      background: var(--card); border:1px solid var(--border); border-radius: var(--radius); padding: 18px; margin-bottom: 16px; box-shadow: var(--shadow);
    }
    section h2{margin-top: 0; font-size: 1.6rem;}
    .grid{display:grid; gap: 16px;}
    .grid.cols-2{grid-template-columns: repeat(2, minmax(0,1fr));}
    .grid.cols-3{grid-template-columns: repeat(3, minmax(0,1fr));}
    @media (max-width: 900px){.grid.cols-3{grid-template-columns: 1fr 1fr;}}
    @media (max-width: 620px){.grid.cols-2,.grid.cols-3{grid-template-columns: 1fr;}}

    .card{border:1px solid var(--border); border-radius: 14px; background: var(--bg-elev); overflow: hidden; transition:.2s transform, .2s box-shadow;}
    .card:hover{transform: translateY(-2px); box-shadow: 0 12px 32px rgba(0,0,0,.15);}
    .card .body{padding: 12px;}
    .badge{display:inline-flex; align-items:center; gap:6px; font-size:.82em; background: var(--chip-bg); padding: 4px 8px; border-radius: 8px; border:1px solid var(--border);}

    .table{width:100%; border-collapse: collapse;}
    .table th,.table td{padding: 10px; border-bottom:1px solid var(--border); text-align: left; vertical-align: top;}
    .table th{position: sticky; top:0; background: var(--bg-elev); z-index: 1; cursor: pointer;}
    .sort-indicator{opacity:.4; margin-left:4px;}

    details.accordion{border:1px solid var(--border); border-radius:10px; padding: 8px 10px; background: var(--bg-elev);}
    details.accordion + details.accordion{margin-top:10px;}
    details.accordion summary{cursor:pointer; font-weight:600;}
    details.accordion[open]{outline: 2px solid color-mix(in oklab, var(--primary), transparent 60%);}

    .tabs{display:flex; gap:8px; margin-bottom:12px;}
    .tab{padding:8px 12px; border-radius:10px; border:1px solid var(--border); background: var(--bg-elev); cursor:pointer;}
    .tab.active{background: var(--primary); color:#fff; border-color: transparent;}
    .tab-panels > div{display:none;}
    .tab-panels > div.active{display:block;}

    .modal{position: fixed; inset: 0; display:none; place-items: center; background: rgba(0,0,0,.5);}
    .modal.open{display:grid;}
    .modal .dialog{max-width: 720px; width: 96%; background: var(--card); border:1px solid var(--border); border-radius: 16px; box-shadow: var(--shadow); overflow:hidden;}
    .modal .dialog header{display:flex; justify-content:space-between; align-items:center; padding: 12px 16px; border-bottom:1px solid var(--border);}
    .modal .dialog .content{padding: 16px;}

    .note{padding: 10px; border-left: 4px solid var(--accent); background: color-mix(in oklab, var(--accent), transparent 85%); border-radius: 8px;}
    .warn{padding: 10px; border-left: 4px solid var(--warn); background: color-mix(in oklab, var(--warn), transparent 88%); border-radius: 8px;}
    .danger{padding: 10px; border-left: 4px solid var(--danger); background: color-mix(in oklab, var(--danger), transparent 88%); border-radius: 8px;}

    .gallery{display:grid; grid-template-columns: repeat(6, 1fr); gap: 6px;}
    @media (max-width:900px){.gallery{grid-template-columns: repeat(4, 1fr);}}
    @media (max-width:600px){.gallery{grid-template-columns: repeat(3, 1fr);}}
    .gallery .ph{
      aspect-ratio: 1/1; background: var(--bg-elev); border:1px solid var(--border); border-radius:10px;
      display:grid; place-items:center; color: var(--muted); font-size:.9em;
    }

    .kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; background: var(--bg-elev); border:1px solid var(--border); border-bottom-width: 2px; border-radius:6px; padding: 2px 6px;}
    .muted{color: var(--muted);}

    .footer{color: var(--muted); font-size:.92em; display:flex; flex-wrap:wrap; gap:10px; justify-content: space-between; align-items:center;}

    .highlight{background: color-mix(in oklab, var(--accent), transparent 80%); border-radius: 4px; padding: 0 2px;}

    #topBtn{position: fixed; bottom: 18px; right: 18px; z-index: 50; display:none;}
    #topBtn.show{display:inline-flex;}

    @media print{
      header.hero, nav.toc, #topBtn, .bar .btn.print-hide, .quiz-answers, .chips{display:none !important;}
      section{break-inside: avoid;}
      body{background:#fff; color:#000;}
      a{text-decoration: none; color:#000;}
    }
  </style>
</head>
<body>
  <a class="skip" href="#content">본문 바로가기</a>

  <header class="hero" role="banner" aria-label="페이지 머리말">
    <div class="container">
      <h1 class="title">고양이 지식백과</h1>
      <p class="subtitle">호기심 많은 존재에 대한 사랑과 과학, 그리고 일상. 깊이 있게, 하지만 따뜻하게.</p>

      <div class="bar" role="toolbar" aria-label="빠른 실행 막대">
        <div class="search" role="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.2-4.2M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          <input id="searchInput" type="search" placeholder="전체 검색 (예: '품종', '영양', '울음소리')" aria-label="사이트 검색" />
        </div>
        <button id="themeBtn" class="btn" aria-pressed="false" title="테마 전환">
          <span>라이트/다크</span>
        </button>
        <div class="btn" title="글자 크기">
          <label for="fontRange" class="muted" style="margin-right:6px;">A</label>
          <input id="fontRange" type="range" min="14" max="20" value="16" aria-label="글자 크기 조절" />
          <label class="muted" style="margin-left:6px;">A</label>
        </div>
        <button class="btn print-hide" onclick="window.print()">
          <span>프린트</span>
        </button>
      </div>

      <div class="chips" style="margin-top:12px;">
        <span class="muted">빠른 필터:</span>
        <button class="chip" data-jump="#breeds">품종</button>
        <button class="chip" data-jump="#care">돌봄</button>
        <button class="chip" data-jump="#nutrition">영양</button>
        <button class="chip" data-jump="#health">건강</button>
        <button class="chip" data-jump="#quiz">퀴즈</button>
      </div>
    </div>
  </header>

  <div class="container">
    <main id="content">
      <nav class="toc" aria-label="목차">
        <h3>목차</h3>
        <div id="tocLinks" role="list"></div>
      </nav>

      <div>
        <section id="intro" tabindex="-1" aria-labelledby="intro-h">
          <h2 id="intro-h">소개: 왜 고양이일까</h2>
          <p>고양이는 독립적이면서도 교감의 순간을 누구보다 선명하게 선물합니다. 때론 무심한 듯하지만, 당신이 힘든 날이면 조용히 곁을 지키죠. 이 지식백과는 과학과 실천, 그리고 마음을 담아 고양이를 더 잘 이해하고 돌보는 길을 안내합니다.</p>
          <div class="note">
            팁: 각 섹션의 우측 상단 목차를 활용해 원하는 내용을 빠르게 탐색하세요. 검색창에서 키워드를 입력하면 본문에도 즉시 하이라이트가 적용됩니다.
          </div>
        </section>

        <section id="taxonomy" tabindex="-1" aria-labelledby="taxonomy-h">
          <h2 id="taxonomy-h">분류·해부: 작은 포식자의 설계도</h2>
          <div class="grid cols-2">
            <div>
              <h3>기본 분류</h3>
              <ul>
                <li><b>학명:</b> Felis catus</li>
                <li><b>과:</b> Felidae (고양이과)</li>
                <li><b>식성:</b> 의무적 육식동물</li>
                <li><b>활동성:</b> 황혼성(새벽/해질녘 활동 최적)</li>
              </ul>
              <p class="muted">진화는 고양이에게 빠른 반사신경, 예민한 감각, 그리고 효율적인 사냥 도구를 선물했습니다.</p>
            </div>
            <div>
              <h3>주요 해부 특징</h3>
              <ul>
                <li><b>수염(진동수염):</b> 공간 인지·바람 감지</li>
                <li><b>수축 가능한 발톱:</b> 사냥과 등반 최적화</li>
                <li><b>후각·청각:</b> 사람보다 훨씬 민감한 감지 능력</li>
                <li><b>야간 시력:</b> 망막 뒤 탭텀 구조로 미광 증폭</li>
              </ul>
            </div>
          </div>
          <div class="gallery" style="margin-top:10px;" aria-label="개념 일러스트 (플레이스홀더)">
            <div class="ph">해부</div><div class="ph">발톱</div><div class="ph">눈</div><div class="ph">수염</div><div class="ph">귀</div><div class="ph">치아</div>
          </div>
        </section>

        <section id="behavior" tabindex="-1" aria-labelledby="behavior-h">
          <h2 id="behavior-h">행동·의사소통: 말 대신 보여주는 언어</h2>
          <div class="grid cols-3">
            <div class="card">
              <div class="body">
                <h3>신체 언어</h3>
                <ul>
                  <li><b>꼬리:</b> 위로 세움=친근, 퍼짐=경고</li>
                  <li><b>귀:</b> 앞으로=흥미, 뒤로=불안/공격</li>
                  <li><b>눈:</b> 느린 깜빡임=신뢰의 인사</li>
                </ul>
              </div>
            </div>
            <div class="card">
              <div class="body">
                <h3>발성</h3>
                <ul>
                  <li><b>야옹:</b> 주로 사람에게 향한 소통</li>
                  <li><b>그르렁거림:</b> 만족·자기 진정</li>
                  <li><b>하악질:</b> 경계·거리 유지 요청</li>
                </ul>
              </div>
            </div>
            <div class="card">
              <div class="body">
                <h3>환경 풍부화</h3>
                <ul>
                  <li>수직 공간(캣타워, 선반)</li>
                  <li>사냥놀이(낚싯대, 퍼즐 피더)</li>
                  <li>숨숨집과 안전지대 확보</li>
                </ul>
              </div>
            </div>
          </div>
          <p>고양이는 스스로를 지키며 다가오길 기다립니다. 그들의 템포를 존중하면, 느린 깜빡임 하나에도 관계가 자랍니다.</p>
        </section>

        <section id="breeds" tabindex="-1" aria-labelledby="breeds-h">
          <h2 id="breeds-h">품종 백과: 성향·관리 난이도·특징</h2>

          <div class="chips" aria-label="품종 필터">
            <button class="chip active" data-filter="all">전체</button>
            <button class="chip" data-filter="장모">장모</button>
            <button class="chip" data-filter="단모">단모</button>
            <button class="chip" data-filter="활동적">활동적</button>
            <button class="chip" data-filter="차분함">차분함</button>
            <button class="chip" data-filter="대형">대형</button>
            <button class="chip" data-filter="저알레르기">저알레르기</button>
            <button class="chip" data-filter="초보자친화">초보자친화</button>
            <button class="chip" data-filter="가족친화">가족친화</button>
          </div>

          <div id="breedCards" class="grid cols-3" style="margin-top:12px;"></div>

          <details class="accordion" style="margin-top:14px;">
            <summary>표로 한눈에 보기</summary>
            <div style="overflow:auto; max-height: 420px;">
              <table class="table" id="breedTable" aria-label="품종 비교 표">
                <thead>
                  <tr>
                    <th data-key="name">품종 <span class="sort-indicator">↕</span></th>
                    <th data-key="origin">기원</th>
                    <th data-key="coat">모질</th>
                    <th data-key="size">크기</th>
                    <th data-key="activity">활동성</th>
                    <th data-key="grooming">그루밍</th>
                    <th data-key="lifespan">수명</th>
                    <th data-key="hypo">저알레르기</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </details>

          <div class="muted" style="margin-top:8px;">카드를 클릭하면 상세 정보를 확인하고 즐겨찾기에 저장할 수 있습니다.</div>
        </section>

        <section id="nutrition" tabindex="-1" aria-labelledby="nutrition-h">
          <h2 id="nutrition-h">영양: 의무적 육식동물의 식단 설계</h2>
          <div class="tabs" role="tablist" aria-label="생애 단계">
            <button class="tab active" data-tab="kitten" role="tab" aria-selected="true">자묘</button>
            <button class="tab" data-tab="adult" role="tab">성묘</button>
            <button class="tab" data-tab="senior" role="tab">노령묘</button>
          </div>
          <div class="tab-panels">
            <div id="kitten" class="active">
              <ul>
                <li><b>단백질 중심:</b> 급격한 성장과 면역을 지원</li>
                <li><b>소량 다회 급여:</b> 위가 작아 에너지 분배가 중요</li>
                <li><b>질감 다양화:</b> 건식·습식·토퍼로 기호성 형성</li>
              </ul>
            </div>
            <div id="adult">
              <ul>
                <li><b>균형:</b> 과체중 예방과 근육 유지</li>
                <li><b>수분 섭취:</b> 습식·워터펀틴으로 요로 건강 보호</li>
                <li><b>간헐적 놀이 급여:</b> 사냥 본능 충족</li>
              </ul>
            </div>
            <div id="senior">
              <ul>
                <li><b>소화 용이성:</b> 고품질 단백질·가벼운 지방</li>
                <li><b>관절·신장 배려:</b> 오메가·인 제한 등 수의사 상담</li>
                <li><b>정기 체크:</b> 체중·근육량 모니터링</li>
              </ul>
            </div>
          </div>
          <div class="warn" style="margin-top:8px;">급격한 식단 변경은 구토·설사를 유발할 수 있어요. 7~10일에 걸쳐 서서히 전환하세요.</div>
        </section>

        <section id="health" tabindex="-1" aria-labelledby="health-h">
          <h2 id="health-h">건강: 예방이 최고의 치료</h2>
          <div class="grid cols-2">
            <div>
              <h3>핵심 체크리스트</h3>
              <ul>
                <li><b>정기 검진:</b> 예방접종, 치과, 혈액/소변 검사</li>
                <li><b>기생충 관리:</b> 내부·외부 구제제 일정</li>
                <li><b>중성화:</b> 특정 질병 및 문제행동 예방</li>
                <li><b>실내 안전:</b> 추락·중독·스트레스 요인 차단</li>
              </ul>
            </div>
            <div>
              <h3>주의 신호</h3>
              <ul>
                <li>식욕·음수량 급변, 잦은 소변 시도</li>
                <li>구취·침흘림·잇몸 출혈</li>
                <li>털 상태 악화, 과도한 그루밍</li>
                <li>숨숨 곳 증가, 사회적 회피</li>
              </ul>
            </div>
          </div>
          <p class="danger" style="margin-top:8px;">방광염·요로 폐색 의심(배변통에서 울음, 소변 미배출)은 응급입니다. 즉시 병원으로.</p>
        </section>

        <section id="care" tabindex="-1" aria-labelledby="care-h">
          <h2 id="care-h">돌봄 가이드: 일상 루틴과 환경</h2>
          <div class="grid cols-3">
            <div class="card">
              <div class="body">
                <h3>화장실</h3>
                <ul>
                  <li><b>개수:</b> 고양이 수 + 1</li>
                  <li><b>모래:</b> 기호에 맞는 알갱이·향료 최소</li>
                  <li><b>위치:</b> 조용하고 탈출 경로가 보이는 곳</li>
                </ul>
              </div>
            </div>
            <div class="card">
              <div class="body">
                <h3>그루밍</h3>
                <ul>
                  <li>장모는 매일, 단모는 주 1~2회 브러싱</li>
                  <li>손톱은 2~4주 간격으로</li>
                  <li>치아는 가능한 매일, 최소 주 3회</li>
                </ul>
              </div>
            </div>
            <div class="card">
              <div class="body">
                <h3>놀이·훈련</h3>
                <ul>
                  <li>사냥 사이클: 유혹→추격→포획→먹기→휴식</li>
                  <li>클리커로 긍정강화</li>
                  <li>스크래칭 포스트는 다양한 높이·재질</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <section id="culture" tabindex="-1" aria-labelledby="culture-h">
          <h2 id="culture-h">역사·문화: 인간과 함께한 시간</h2>
          <p>곡창과 창고를 지키던 파트너에서, 오늘의 반려까지—고양이는 늘 곁에 있었어요. 고양이는 예술·문학·인터넷 밈 속에서도 독보적인 상징으로 자리 잡았죠. 시대가 바뀌어도 고양이가 주는 위안은 변하지 않습니다.</p>
          <ul>
            <li><b>고대:</b> 곡물 보관을 위한 설치류 통제</li>
            <li><b>근대:</b> 선박·도시에서의 해충 방제</li>
            <li><b>현대:</b> 반려·치유의 동반자</li>
          </ul>
        </section>

        <section id="ethics" tabindex="-1" aria-labelledby="ethics-h">
          <h2 id="ethics-h">입양·윤리: 책임 있는 선택</h2>
          <div class="grid cols-2">
            <div>
              <h3>입양 전 체크</h3>
              <ul>
                <li>장기적 비용·시간·환경 점검</li>
                <li>가족 구성원 알레르기·합의</li>
                <li>기존 반려동물과의 합사 계획</li>
              </ul>
            </div>
            <div>
              <h3>윤리적 고려</h3>
              <ul>
                <li>무분별 번식·과도한 형태 선호 지양</li>
                <li>마이크로칩·등록·실내 사육</li>
                <li>TNR·보호소 후원으로 지역사회 기여</li>
              </ul>
            </div>
          </div>
        </section>

        <section id="senior" tabindex="-1" aria-labelledby="senior-h">
          <h2 id="senior-h">노령묘 케어: 더 천천히, 더 따뜻하게</h2>
          <p>나이가 들수록 고양이는 조용해지고, 작은 불편에도 민감해집니다. 낮은 턱의 화장실, 미끄럽지 않은 바닥, 따뜻한 휴식 공간이 큰 차이를 만듭니다. 정기 검진과 섬세한 관찰이 노년의 품위를 지켜줍니다.</p>
        </section>

        <section id="quiz" tabindex="-1" aria-labelledby="quiz-h">
          <h2 id="quiz-h">지식 체크 퀴즈</h2>
          <ol id="quizList" class="quiz-questions"></ol>
          <div style="margin-top:10px; display:flex; gap:10px;">
            <button class="btn primary" id="quizSubmit">채점하기</button>
            <button class="btn" id="quizReset">초기화</button>
          </div>
          <div id="quizResult" style="margin-top:10px; font-weight:700;"></div>
        </section>

        <section id="faq" tabindex="-1" aria-labelledby="faq-h">
          <h2 id="faq-h">자주 묻는 질문</h2>
          <details class="accordion">
            <summary>고양이가 밤에 우다다를 해요. 정상인가요?</summary>
            <div>황혼성 습성으로 밤 시간대 활동이 늘 수 있어요. 자는 전 짧은 사냥 놀이와 소량 급여로 에너지를 해소해 주세요.</div>
          </details>
          <details class="accordion">
            <summary>물은 거의 안 마시는 것 같아요.</summary>
            <div>습식 급여, 워터펀틴, 여러 장소의 물그릇으로 섭취를 늘려보세요. 맛 없는 물(플라스틱 냄새)도 기피 요인입니다.</div>
          </details>
          <details class="accordion">
            <summary>새로운 고양이와 합사는 어떻게 하나요?</summary>
            <div>공간 분리→냄새 교환→문틈 급여→짧은 대면의 단계적 진행이 안전합니다. 서두르지 않는 것이 핵심이에요.</div>
          </details>
        </section>

        <section id="glossary" tabindex="-1" aria-labelledby="glossary-h">
          <h2 id="glossary-h">용어 사전</h2>
          <div class="chips" id="glossaryFilter">
            <button class="chip active" data-letter="all">전체</button>
            <button class="chip" data-letter="가">가</button>
            <button class="chip" data-letter="나">나</button>
            <button class="chip" data-letter="다">다</button>
            <button class="chip" data-letter="마">마</button>
            <button class="chip" data-letter="사">사</button>
          </div>
          <div id="glossaryList" style="margin-top:10px;"></div>
        </section>

        <footer class="footer">
          <div>마지막 업데이트: <time id="lastUpdated"></time></div>
          <div>
            <span class="kbd">/</span> 누르면 검색창으로 이동 · <button class="btn" id="clearSearch">검색 초기화</button>
          </div>
        </footer>
      </div>
    </main>
  </div>

  <button id="topBtn" class="btn" aria-label="위로 이동">맨 위로</button>

  <!-- Modal: 품종 상세 -->
  <div id="breedModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="breedTitle">
    <div class="dialog">
      <header>
        <h3 id="breedTitle" style="margin:0;">품종 상세</h3>
        <div style="display:flex; gap:8px;">
          <button class="btn" id="favBtn">즐겨찾기</button>
          <button class="btn" id="closeModal" aria-label="닫기">닫기</button>
        </div>
      </header>
      <div class="content" id="breedContent"></div>
    </div>
  </div>

  <script>
    // 상태
    const $ = sel => document.querySelector(sel);
    const $$ = sel => document.querySelectorAll(sel);
    const state = {
      theme: localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'),
      favorites: JSON.parse(localStorage.getItem('favorites') || '[]'),
      breeds: [
        {id:'maine-coon', name:'메인쿤', origin:'미국', coat:'장모', size:'대형', activity:'중간', grooming:'중간', lifespan:'12–15년', hypo:false, tags:['대형','가족친화','초보자친화'], traits:'온화하고 우아한 거인, 높은 지능과 순한 성격.', colors:['브라운 태비','솔리드','투컬러']},
        {id:'siamese', name:'샴', origin:'태국', coat:'단모', size:'중형', activity:'활동적', grooming:'쉬움', lifespan:'12–20년', hypo:false, tags:['활동적','수다쟁이'], traits:'사람 지향적, 수다스러움, 애착 강함.', colors:['실','초콜릿','블루','라일락']},
        {id:'persian', name:'페르시안', origin:'이란', coat:'장모', size:'중형', activity:'차분함', grooming:'높음', lifespan:'12–17년', hypo:false, tags:['차분함','실내형'], traits:'차분하고 우아한 성격, 고정기 그루밍 필요.', colors:['화이트','블랙','블루','크림']},
        {id:'sphynx', name:'스핑크스', origin:'캐나다', coat:'무모', size:'중형', activity:'활동적', grooming:'중간', lifespan:'9–15년', hypo:false, tags:['저알레르기','활동적'], traits:'털 대신 주 1회 목욕, 사람 친화적.', colors:['다양']},
        {id:'ragdoll', name:'랙돌', origin:'미국', coat:'중장모', size:'대형', activity:'차분함', grooming:'중간', lifespan:'12–17년', hypo:false, tags:['가족친화','차분함','대형'], traits:'안정적인 성격, 안기면 힘을 빼는 경향.', colors:['실','블루','초콜릿','라일락']},
        {id:'bengal', name:'뱅갈', origin:'미국', coat:'단모', size:'중형', activity:'매우 활동적', grooming:'쉬움', lifespan:'12–16년', hypo:false, tags:['활동적','지능형'], traits:'야생풍 무늬, 높은 운동량과 퍼즐놀이 필요.', colors:['스팟','마블']},
        {id:'british-shorthair', name:'브리티시 쇼트헤어', origin:'영국', coat:'단모', size:'중대형', activity:'차분함', grooming:'쉬움', lifespan:'12–20년', hypo:false, tags:['초보자친화','차분함'], traits:'둥근 얼굴과 온화한 성격, 실내 생활 적합.', colors:['블루','크림','실버 탭비']},
        {id:'scottish-fold', name:'스코티시 폴드', origin:'스코틀랜드', coat:'단모', size:'중형', activity:'중간', grooming:'쉬움', lifespan:'11–15년', hypo:false, tags:['온순함'], traits:'접힌 귀가 특징이나 관절 건강 주의.', colors:['다양']},
        {id:'abyssinian', name:'아비시니안', origin:'에티오피아', coat:'단모', size:'중형', activity:'활동적', grooming:'쉬움', lifespan:'12–15년', hypo:false, tags:['활동적','지능형'], traits:'탐험과 점프를 사랑하는 호기심 왕.', colors:['루디','레드','블루','포운']},
        {id:'norwegian-forest', name:'노르웨이 숲', origin:'노르웨이', coat:'장모', size:'대형', activity:'중간', grooming:'중간', lifespan:'12–16년', hypo:false, tags:['대형','아웃도어 취향'], traits:'두꺼운 이중모, 등반 능력이 뛰어남.', colors:['다양']}
      ],
      sort: {key:'name', asc:true},
      glossary: [
        {term:'가축화', desc:'야생 동물이 인간과 함께 살도록 적응하는 과정.'},
        {term:'고양이 감기', desc:'상부호흡기감염의 총칭으로 재채기·콧물·결막염 동반.'},
        {term:'낙상 증후군', desc:'높은 곳에서의 추락으로 발생하는 외상 집합.'},
        {term:'마킹', desc:'소변·발톱·볼샘으로 영역 표시를 하는 행동.'},
        {term:'사냥 사이클', desc:'탐색→잠복→추격→포획→섭취→휴식의 본능적 흐름.'}
      ],
      quiz: [
        {q:'고양이의 수염(진동수염)이 하는 일은?', a:['온도 유지','공간 인지와 감지','냄새 제거','청각 증폭'], c:1},
        {q:'자묘 영양 설계에서 가장 중요한 것은?', a:['지방 제한','탄수화물 증가','단백질 중심','염분 증가'], c:2},
        {q:'요로 폐색 의심 시 가장 먼저 할 일은?', a:['물 주기','하루 기다리기','즉시 병원 방문','사료 변경'], c:2},
        {q:'합사에서 가장 중요한 원칙은?', a:['빠르게 직면','서서히 단계적 진행','한 공간에두기','먹이 경쟁 유도'], c:1}
      ]
    };

    // 테마
    const applyTheme = (t) => {
      document.documentElement.setAttribute('data-theme', t);
      localStorage.setItem('theme', t);
      $('#themeBtn').setAttribute('aria-pressed', t === 'dark');
    };
    applyTheme(state.theme);
    $('#themeBtn').addEventListener('click', () => {
      state.theme = state.theme === 'dark' ? 'light' : 'dark';
      applyTheme(state.theme);
    });

    // 글자 크기
    const applyFont = (px) => { document.body.style.setProperty('--font-size', px + 'px'); };
    $('#fontRange').addEventListener('input', e => applyFont(e.target.value));

    // 빠른 점프
    $$('.chip[data-jump]').forEach(ch => ch.addEventListener('click', e => {
      const id = e.currentTarget.dataset.jump;
      document.querySelector(id)?.scrollIntoView({behavior:'smooth', block:'start'});
    }));

    // 목차 생성
    const tocRoot = $('#tocLinks');
    const headings = [...document.querySelectorAll('section h2')];
    headings.forEach(h => {
      const a = document.createElement('a');
      a.href = '#' + h.parentElement.id;
      a.textContent = h.textContent;
      a.role = 'listitem';
      tocRoot.appendChild(a);
    });
    // 스크롤 스파이
    const spy = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        const id = '#' + entry.target.id;
        const link = tocRoot.querySelector(`a[href="${id}"]`);
        if(entry.isIntersecting){
          tocRoot.querySelectorAll('a').forEach(a => a.classList.remove('active'));
          link?.classList.add('active');
        }
      });
    }, {rootMargin:'-40% 0px -55% 0px', threshold:0});
    document.querySelectorAll('section').forEach(sec => spy.observe(sec));

    // 맨 위로
    const topBtn = $('#topBtn');
    window.addEventListener('scroll', () => {
      if(window.scrollY > 300) topBtn.classList.add('show'); else topBtn.classList.remove('show');
    });
    topBtn.addEventListener('click', () => window.scrollTo({top:0, behavior:'smooth'}));

    // 검색: 텍스트 하이라이트 + 품종 필터링 + 표 필터
    const clearHighlights = () => {
      document.querySelectorAll('.highlight').forEach(el => {
        const parent = el.parentNode; parent.replaceChild(document.createTextNode(el.textContent), el);
        parent.normalize();
      });
    };
    const highlightText = (node, term) => {
      if(!term || term.length < 2) return;
      const walker = document.createTreeWalker(node, NodeFilter.SHOW_TEXT, null);
      const re = new RegExp(term, 'gi');
      const nodes = [];
      while(walker.nextNode()) nodes.push(walker.currentNode);
      nodes.forEach(n => {
        if(!n.nodeValue.trim()) return;
        const frag = document.createDocumentFragment();
        let lastIdx = 0; const text = n.nodeValue;
        text.replace(re, (m, idx) => {
          frag.appendChild(document.createTextNode(text.slice(lastIdx, idx)));
          const mark = document.createElement('span'); mark.className = 'highlight'; mark.textContent = m;
          frag.appendChild(mark);
          lastIdx = idx + m.length;
        });
        if(lastIdx) {
          frag.appendChild(document.createTextNode(text.slice(lastIdx)));
          n.parentNode.replaceChild(frag, n);
        }
      });
    };
    const doSearch = (q) => {
      clearHighlights();
      if(q && q.length >= 2){
        document.querySelectorAll('section').forEach(sec => highlightText(sec, q));
      }
      // 품종 카드 필터
      const val = (q||'').toLowerCase();
      document.querySelectorAll('#breedCards .card').forEach(card => {
        const text = card.dataset.text;
        card.style.display = text.includes(val) ? '' : 'none';
      });
      // 표 필터
      document.querySelectorAll('#breedTable tbody tr').forEach(tr => {
        tr.style.display = tr.textContent.toLowerCase().includes(val) ? '' : 'none';
      });
    };
    const searchInput = $('#searchInput');
    searchInput.addEventListener('input', e => doSearch(e.target.value));
    $('#clearSearch').addEventListener('click', () => { searchInput.value=''; doSearch(''); searchInput.focus(); });
    document.addEventListener('keydown', (e) => { if(e.key === '/' && !/input|textarea/i.test(document.activeElement.tagName)){ e.preventDefault(); searchInput.focus(); }});

    // 품종 카드 렌더
    const breedCards = $('#breedCards');
    const makeSVG = (label) => {
      const hue = Math.floor(Math.random()*360);
      return `<svg viewBox="0 0 300 180" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="${label} 플레인 일러스트">
        <defs>
          <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="hsl(${hue} 70% 60%)"/>
            <stop offset="100%" stop-color="hsl(${(hue+40)%360} 70% 50%)"/>
          </linearGradient>
        </defs>
        <rect width="300" height="180" rx="16" fill="url(#g)"/>
        <circle cx="80" cy="90" r="34" fill="rgba(255,255,255,.85)"/>
        <circle cx="130" cy="90" r="34" fill="rgba(255,255,255,.85)"/>
        <path d="M60 70 L70 40 L90 68 Z" fill="rgba(255,255,255,.85)"/>
        <path d="M120 68 L140 40 L150 70 Z" fill="rgba(255,255,255,.85)"/>
        <rect x="180" y="50" width="100" height="20" rx="10" fill="rgba(255,255,255,.3)"/>
        <rect x="180" y="80" width="100" height="20" rx="10" fill="rgba(255,255,255,.3)"/>
        <rect x="180" y="110" width="80" height="20" rx="10" fill="rgba(255,255,255,.3)"/>
        <text x="18" y="164" fill="rgba(0,0,0,.5)" style="font: 700 14px system-ui;">${label}</text>
      </svg>`;
    };
    const renderBreeds = () => {
      breedCards.innerHTML = '';
      state.breeds.forEach(b => {
        const card = document.createElement('article');
        card.className = 'card';
        card.setAttribute('role','article');
        card.dataset.filter = [b.coat, b.size, b.activity.includes('활동')?'활동적':'차분함', b.hypo?'저알레르기':'', ...(b.tags||[])].join(' ');
        card.dataset.text = `${b.name} ${b.origin} ${b.coat} ${b.size} ${b.activity} ${b.traits}`.toLowerCase();
        card.innerHTML = `
          <div class="media">${makeSVG(b.name)}</div>
          <div class="body">
            <div style="display:flex; justify-content:space-between; align-items:baseline;">
              <h3 style="margin:8px 0;">${b.name}</h3>
              <span class="badge">${b.origin}</span>
            </div>
            <div class="muted" style="margin-bottom:6px;">${b.traits}</div>
            <div style="display:flex; gap:6px; flex-wrap:wrap;">
              <span class="badge">모질: ${b.coat}</span>
              <span class="badge">크기: ${b.size}</span>
              <span class="badge">활동성: ${b.activity}</span>
              <span class="badge">수명: ${b.lifespan}</span>
              ${b.hypo ? '<span class="badge">저알레르기</span>':''}
            </div>
          </div>
        `;
        card.addEventListener('click', () => openBreedModal(b.id));
        breedCards.appendChild(card);
      });
    };
    renderBreeds();

    // 품종 필터 칩
    const filterChips = document.querySelectorAll('#breeds .chips .chip[data-filter]');
    filterChips.forEach(chip => chip.addEventListener('click', e => {
      filterChips.forEach(c => c.classList.remove('active'));
      e.currentTarget.classList.add('active');
      const f = e.currentTarget.dataset.filter;
      document.querySelectorAll('#breedCards .card').forEach(card => {
        card.style.display = (f === 'all' ||
